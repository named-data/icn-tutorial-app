<!doctype html>
<!--
  Material Design Lite
  Copyright 2015 Google Inc. All rights reserved.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

      https://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="NDN Chat">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>NDN Chat</title>

  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <!--
  <link rel="icon" sizes="192x192" href="images/touch/chrome-touch-icon-192x192.png">
  -->
  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="NDN Chat">
  <link rel="apple-touch-icon-precomposed" href="apple-touch-icon-precomposed.png">

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="images/touch/ms-touch-icon-144x144-precomposed.png">
  <meta name="msapplication-TileColor" content="#3372DF">

  <link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&amp;lang=en" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  
  <link rel="stylesheet" href="css/jquery-ui.min.css">
  <link rel="stylesheet" href="css/material.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
<div class="demo-layout mdl-layout mdl-js-layout mdl-layout--fixed-drawer mdl-layout--fixed-header">
  <header class="demo-header mdl-layout__header mdl-color--white mdl-color--grey-100 mdl-color-text--grey-600">
	<div class="mdl-layout__header-row">
	  <span class="mdl-layout-title" id="userInfo"></span>
	  <div class="mdl-layout-spacer"></div>
	  
	  <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable">
		<label class="mdl-button mdl-js-button mdl-button--icon" for="search">
		  <i class="material-icons">search</i>
		</label>
		<div class="mdl-textfield__expandable-holder">
		  <input class="mdl-textfield__input" type="text" id="search" />
		  <label class="mdl-textfield__label" for="search">Enter your query...</label>
		</div>
	  </div>
	  <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" id="hdrbtn">
		<i class="material-icons">more_vert</i>
	  </button>
	  <ul class="mdl-menu mdl-js-menu mdl-js-ripple-effect mdl-menu--bottom-right" for="hdrbtn">
		<li id="openShowCertDialogBtn" class="mdl-menu__item">Show certificate</li>
    <li id="openInstallCertDialogBtn" class="mdl-menu__item">Install signed certificate</li>
    <li id="srcAndInstructionLink" class="mdl-menu__item"><a href="https://github.com/zhehaowang/icn-tutorial-app" target="_blank">Source and instruction</a></li>
    <li id="certRequestLink" class="mdl-menu__item"><a href="http://memoria.ndn.ucla.edu:5000" target="_blank">Certificate request site</a></li>
    <li id="showSyncTreeDialogBtn" class="mdl-menu__item">Show sync tree</li>
	  </ul>
	</div>
  </header>

  <div class="demo-drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
    <header class="demo-drawer-header">
	  <h5>UCLA/REMAP</h5>

	  <div class="demo-avatar-dropdown">
		<div class="mdl-layout-spacer"></div>
		<button id="accbtn" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
		  <i class="material-icons" role="presentation">arrow_drop_down</i>
		  <span class="visuallyhidden">Accounts</span>
		</button>
		<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="accbtn">
		  <li class="mdl-menu__item">hello@example.com</li>
		  <li class="mdl-menu__item">info@example.com</li>
		  <li class="mdl-menu__item"><i class="material-icons">add</i>Add another account...</li>
		</ul>
	  </div>
	</header>

	<nav class="demo-navigation mdl-navigation mdl-color--blue-grey-800">

	  <h6 class="mdl-navigation__link title" id = "chan-title">CHANNELS</h6>    

	  <p class="mdl-navigation__link selected" id="chatroomNameLabel"></p>

	  <div class="mdl-layout-spacer"></div>
    <h6 class="mdl-navigation__link title" id = "dir-title">ROSTER</h6>

    <div id="rosterDisplayDiv">
      <!--
  	  <a class="mdl-navigation__link" href="">@Jburke</a>
      -->
    </div>
	  
	  <div class="mdl-layout-spacer"></div>
	</nav>
  </div>

  <!-- feed of messaging -->
  <main class="mdl-layout__content">
	<div id="chatDisplayDiv" class="comment">     
	  <!--
	  <p><span>RandyMan</span><br> In the morning before dressing, light incense and meditate.</p>
	  -->
	</div>        
  </main>
</div>

<!-- Section for user to enter message -->        
<div id = "enter-message">
  <p>
  <div class="mdl-textfield mdl-js-textfield " id="saysomethinggood">
	  <input class="mdl-textfield__input" type="text" id="chatTextInput" />
	  <label class="mdl-textfield__label" for="sample1">Text...</label>
	</div>
  </p>

  <!-- upload photo button -->
  <button class="mdl-button mdl-js-button mdl-button--icon">
	<i class="material-icons">attach_file</i>
  </button>

  <!-- Emoticon button -->
  <button class="mdl-button mdl-js-button mdl-button--icon">
	<i class="material-icons">mood</i>
  </button>

  <!-- Submit -->
  <button id="chatBtn" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent">
	Submit
  </button>
</div>

<!-- Dialog for putting in user email -->
<div id="email-dialog">
  Your email address:
  <input type="text" name="email" id="emailInput"><br>
  Your screen name:
  <input type="text" name="screenname" id="screenNameInput"><br>
</div>

<div id="show-cert-dialog">
  Cert:
  <p id="certString"></p>
</div>

<div id="install-cert-dialog">
  Install cert:
  <textarea id="signedCertString"></textarea>
  <button id="installCertBtn">Install</button>
</div>

<div id="sync-tree-dialog">
  Show sync tree:
  <div id="sync-tree"></div>
</div>

<!--
  TODO (Signing/Verification): 
  1. Put a modal dialogue to ask the user to put his email
  2. Use name with that email as the default identity name, sign with that keychain
  3. Put in Jeff's policy
  4. Make sure root key's installed, correctly configure the PolicyManager
  5. Test with a few certs I have from my cert site
  6. Q: Trust for sync response, which should be handled in the library? The app should give the library its trust schema for sync responses?
-->

<!--
  TODO (Sync/Chat):
  1. sendInterest logic probably should ask for everything that hasn't be asked for, according to given sequence numbers
  2. onTimeout should re-express interest, max number of re-expressions?
  3. Recovery scenario tests?
  4. Q: How does a new participant know *all* the previous names of participants? Will they be in the same sync tree? (They should...but that tree may not be kept by anyone when a new participant joins? The network may cache this tree, but its data may go stale, etc, should we ask for stale data too?)
  5. Each email has its one chat publishing prefix, or each email can pick whatever (nick)name to use? Looks like it shouldn't be whatever name, but a timestamped session component. 
  6. Remind me of the session ID in chat messages, it's a different thing from what's in Chrono*Sync*2013's session(basically a part of the given sync name) now.
-->

<script src="js/material.min.js"></script>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/d3/d3.min.js"></script>

<script src="js/protobuf/long.min.js"></script>
<script src="js/protobuf/bytebuffer-ab.min.js"></script>
<script src="js/protobuf/protobuf.min.js"></script>

<script src="js/ndn.min.js"></script>
<script src="js/dexie.min.js"></script>

<script src="js/indexeddb-storage.js"></script>

<script src="js/fire-chat.js"></script>
<script src="js/page.js"></script>
</body>
</html>
